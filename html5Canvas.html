<!DOCTYPE html>
<html>

<head>
    <title>html5 Canvas </title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta name="generator" content="Geany 1.23.1" />
    <style>
    .box{width:200;float:left;margin:5px;}
    h6{margin:0px;}
    </style>
</head>

<body>
    <div id="show"></div>

<script id="tpl" type="text/template">
{@each list as item,index}
<div class="box"><h6>${item}</h6><canvas id="c${item}" data="${item}" width="${item.length-1}0" height="${item.length-1}0" style="border:solid 1px #ccc;">你的浏览器不支持 Canvas 标签</canvas></div>
{@/each}
</script>

<script type="text/javascript" src="http://lib.sinaapp.com/js/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript" src="http://juicer.name/javascripts/juicer-min.js"></script>

<script >

function combination(arr){
    var len = arr.length;
    if(len == 0) {return []};
    if(len == 2){
    var a = arr[0], b = arr[1];
        return [[a,b],[b,a]];
    }
    else if(len == 1) {return [[arr[0]]];}
    else{
        var arRtn = [];
        for(var i=0;i <len;i++){
            arRtn = arRtn.concat( merge( arr[i],combination(arr.slice(0,i).concat(arr.slice(i+1,len))) ) );
        }
        return arRtn;
    }
}
function merge(head,arr){
    for(var i=0;i <arr.length;i++)
    arr[i].unshift(head);
    return arr;
}


function get_data(str){
    var ar = combination(str.split(""));
    var data = []
    for(var i=0;i <ar.length;i++){
        data.push(ar[i].join(""));
        console.log(ar[i].join(""));
    }
    return data;
}


</script>

<script>

    function draw(canvasId,strData,unit){
        var canvas = document.getElementById(canvasId);
        if(!canvas.getContext){
            alert('not support canvas');
            return;
        }
        var ctx = canvas.getContext('2d');

        //var width = canvas.getAttribute("width");
        //var height = canvas.getAttribute("height");
        //ctx.fillStyle = "ccc"; //设置填充色
        //ctx.fillRect(0, 0, width, height);

        var data = strData.split('');

        ctx.moveTo(0,0);
        for(var i in data){
            x= i * unit;
            y = (data.length-data[i])*unit; //?
            ctx.lineTo(x,y);
            ctx.moveTo(x,y);
        }
        ctx.stroke();
    }


    function gen_data(){
    var labels = [];
    for(var a=1;a<6;a++){
        for(var b=1;b<6;b++){
            if(a==b) continue;
            for(var c=1;c<6;c++){
                if(c==a || c==b) continue;
                for(var d=1;d<6;d++){
                    if(d ==a || d==b || d==c) continue;
                    for(var e=1;e<6;e++){
                        if(e==a || e==b || e==c || e==d) continue;

                        var tmp = ''+a+b+c+d+e;
                        labels.push(tmp);

    }
    }
    }
        }
    }
    return labels;
}

    $('#show').html(juicer($('#tpl').html(), {list:get_data('12345678')}));

    $('canvas').each(function(){
        var d = $(this).attr('data');
        draw('c'+d,d,10);
        });


</script>


</body>
</html>
